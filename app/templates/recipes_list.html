{% extends "base.html" %}

{% block content %}
<script>
    $(document).on("change", '#department', function(e) {
        var department = $(this).val();
        

        $.ajax({
            type: "POST",
            data: {department: department},
            url: 'admin/users/get_name_list.php',
            dataType: 'json',
            success: function(json) {

                var $el = $("#name");
                $el.empty(); // remove old options
                $el.append($("<option></option>")
                        .attr("value", '').text('Please Select'));
                $.each(json, function(value, key) {
                    $el.append($("<option></option>")
                            .attr("value", value).text(key));
                });														
                

                
                
            }
        });

    });
</script>

<!-- Search -->
<form method='POST' id='category_form' action='{{ url_for("search_handler", form=form) }}'>
    {{ form.hidden_tag() }}
    <div class="search">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Browse Recipes</h2>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group">
                                {{ form.category.label }}
                                {{ form.category(class_="form-control") }}
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                {{ form.cuisine.label }}
                                {{ form.cuisine(class_="form-control") }}
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                {{ form.ingredients.label }}
                                {{ form.ingredients(class_="form-control") }}
                            </div>
                            <div class="form-group">
                                {{ form.allergens.label }}
                                {{ form.allergens(class_="form-control") }}
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                {{ form.any_ingredients.label }}
                                {{ form.any_ingredients(class_="form-control") }}
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                {{ form.search_text(class_="form-control") }}
                                <button type="submit" class="btn">Search Recipes</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- List recipes -->
    {% include '_list_recipes.html' %}

</form>

<!-- Load more recipes -->
<div class="col-lg-12 text-center">
    {% if next_url %}
    <button class="btn btn-load">
        <a href="{{ next_url }}" class="btn btn-load">Next Page</a>
    </button>
    {% endif %}
    {% if prev_url %}
    <button class="btn btn-load">
        <a href="{{ prev_url }}" class="btn btn-load">Previous Page</a>
    </button>
    {% endif %}
</div>





{% endblock %}